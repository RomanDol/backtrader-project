{% extends "base.html" %}

{% block title %}Tools - Backtrader Platform{% endblock %}

{% block content %}
<div class="container">
    <header>
        <h1>üîß Trading Tools</h1>
        <p class="subtitle">–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Binance</p>
    </header>

    <main>
        <!-- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤ -->
        <div class="card">
            <h2>üìã Binance Symbols</h2>
            <p class="hint">–û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –Ω–∞ Binance Futures</p>
            
            <div class="form-actions">
                <button id="update-symbols-btn" class="btn btn-primary">
                    <span class="btn-icon">üîÑ</span>
                    Update Symbols List
                </button>
            </div>
            
            <div id="symbols-message" class="message" style="display: none; margin-top: 1rem;"></div>
        </div>

        <!-- –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö -->
        <div class="card">
            <h2>üìä Historical Data Download</h2>
            <p class="hint">–ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö —Å–≤–µ—á–µ–π —Å Binance Data</p>
            
            <form id="download-data-form">
                <div class="form-group">
                    <label for="symbol-select">Symbol:</label>
                    <select id="symbol-select" name="symbol" required>
                        <option value="">Loading symbols...</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="timeframe-select">Timeframe:</label>
                    <select id="timeframe-select" name="timeframe" required>
                        <option value="1m">1 minute</option>
                        <option value="3m">3 minutes</option>
                        <option value="5m">5 minutes</option>
                        <option value="15m">15 minutes</option>
                        <option value="30m">30 minutes</option>
                        <option value="1h">1 hour</option>
                        <option value="2h">2 hours</option>
                        <option value="4h">4 hours</option>
                        <option value="6h">6 hours</option>
                        <option value="8h">8 hours</option>
                        <option value="12h">12 hours</option>
                        <option value="1d" selected>1 day</option>
                        <option value="3d">3 days</option>
                        <option value="1w">1 week</option>
                        <option value="1mo">1 month</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="period-select">Period:</label>
                    <select id="period-select" name="period" required>
                        <option value="daily">Daily (one day)</option>
                        <option value="monthly" selected>Monthly (one month)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="start-date">Start Date:</label>
                    <input type="date" id="start-date" name="start_date" required>
                </div>

                <div class="form-group">
                    <label for="end-date">End Date:</label>
                    <input type="date" id="end-date" name="end_date" required>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">
                        <span class="btn-icon">üì•</span>
                        Download Data
                    </button>
                </div>
            </form>

            <div id="download-message" class="message" style="display: none; margin-top: 1rem;"></div>
            
            <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä -->
            <div id="download-progress" style="display: none; margin-top: 1rem;">
                <div style="background: var(--bg-dark-tertiary); border-radius: var(--border-radius-base); overflow: hidden;">
                    <div id="progress-bar" style="height: 24px; background: linear-gradient(135deg, var(--color-primary), var(--color-secondary)); width: 0%; transition: width 0.3s ease; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: bold;"></div>
                </div>
                <p id="progress-text" style="margin-top: 0.5rem; font-size: 14px; color: var(--text-secondary);"></p>
            </div>
        </div>
    </main>

    <footer>
        <p>Powered by Backtrader | ¬© 2024</p>
    </footer>
</div>
{% endblock %}

{% block js %}
<script src="{{ url_for('static', filename='js/tools.js') }}"></script>
{% endblock %}